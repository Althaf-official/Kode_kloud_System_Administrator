We have a requirement where we want to password protect a directory in the Apache web server document root. We want to password protect http://<website-url>:<apache_port>/protected URL as per the following requirements (you can use any website-url for it like localhost since there are no such specific requirements as of now). Setup the same on App server 3 as per below mentioned requirements:



a. We want to use basic authentication.


b. We do not want to use htpasswd file based authentication. Instead, we want to use PAM authentication, i.e Basic Auth + PAM so that we can authenticate with a Linux user.


c. We already have a user ravi with password YchZHRcLkL which you need to provide access to.


d. You can test the same using a curl command from jump host curl http://<website-url>:<apache_port>/protected.

-----

```ruby
thor@jump_host ~$ ssh banner@stapp03
The authenticity of host 'stapp03 (172.16.238.12)' can't be established.
ECDSA key fingerprint is SHA256:SySamszyWhhLGFiybhGBqfrr8g55wS/3e37ZpBOvICs.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'stapp03,172.16.238.12' (ECDSA) to the list of known hosts.
banner@stapp03's password: 
[banner@stapp03 ~]$ 
[banner@stapp03 ~]$ 
[banner@stapp03 ~]$ 
[banner@stapp03 ~]$ sudo su -

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for banner: 
[root@stapp03 ~]# 
[root@stapp03 ~]# 
[root@stapp03 ~]# which pwauth
-bash: which: command not found
[root@stapp03 ~]# sudo yum install pwauth
Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
epel/x86_64/metalink                                                 | 9.0 kB  00:00:00     
 * base: mirror.lstn.net
 * epel: ftp-chi.osuosl.org
 * extras: ftpmirror.your.org
 * remi-php72: mirror.team-cymru.com
 * remi-safe: mirror.team-cymru.com
 * updates: mirror.grid.uchicago.edu
base                                                                 | 3.6 kB  00:00:00     
epel                                                                 | 4.7 kB  00:00:00     
extras                                                               | 2.9 kB  00:00:00     
remi-php72                                                           | 3.0 kB  00:00:00     
remi-safe                                                            | 3.0 kB  00:00:00     
updates                                                              | 2.9 kB  00:00:00     
(1/7): extras/7/x86_64/primary_db                                    | 250 kB  00:00:00     
(2/7): epel/x86_64/updateinfo                                        | 1.0 MB  00:00:00     
(3/7): epel/x86_64/group_gz                                          | 100 kB  00:00:00     
(4/7): remi-php72/primary_db                                         | 266 kB  00:00:00     
(5/7): epel/x86_64/primary_db                                        | 7.0 MB  00:00:00     
(6/7): remi-safe/primary_db                                          | 2.5 MB  00:00:00     
(7/7): updates/7/x86_64/primary_db                                   |  24 MB  00:00:00     
Resolving Dependencies
--> Running transaction check
---> Package pwauth.x86_64 0:2.3.10-9.el7 will be installed
--> Processing Dependency: /usr/bin/perl for package: pwauth-2.3.10-9.el7.x86_64
--> Processing Dependency: perl for package: pwauth-2.3.10-9.el7.x86_64
--> Running transaction check
---> Package perl.x86_64 4:5.16.3-299.el7_9 will be installed
--> Processing Dependency: perl-libs = 4:5.16.3-299.el7_9 for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Socket) >= 1.3 for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Scalar::Util) >= 1.10 for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl-macros for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl-libs for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(threads) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(constant) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: libperl.so()(64bit) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Running transaction check
---> Package perl-Carp.noarch 0:1.26-244.el7 will be installed
---> Package perl-Exporter.noarch 0:5.68-3.el7 will be installed
---> Package perl-File-Path.noarch 0:2.09-2.el7 will be installed
---> Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed
---> Package perl-Filter.x86_64 0:1.49-3.el7 will be installed
---> Package perl-Getopt-Long.noarch 0:2.40-3.el7 will be installed
--> Processing Dependency: perl(Pod::Usage) >= 1.14 for package: perl-Getopt-Long-2.40-3.el7.noarch
--> Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-3.el7.noarch
---> Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed
---> Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed
--> Processing Dependency: perl(Pod::Escapes) >= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch
--> Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch
---> Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed
---> Package perl-Socket.x86_64 0:2.010-5.el7 will be installed
---> Package perl-Storable.x86_64 0:2.45-3.el7 will be installed
---> Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed
---> Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed
---> Package perl-constant.noarch 0:1.27-2.el7 will be installed
---> Package perl-libs.x86_64 4:5.16.3-299.el7_9 will be installed
---> Package perl-macros.x86_64 4:5.16.3-299.el7_9 will be installed
---> Package perl-threads.x86_64 0:1.87-4.el7 will be installed
---> Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed
--> Running transaction check
---> Package perl-Encode.x86_64 0:2.51-7.el7 will be installed
---> Package perl-Pod-Escapes.noarch 1:1.04-299.el7_9 will be installed
---> Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed
--> Processing Dependency: perl(Pod::Text) >= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch
--> Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch
---> Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed
--> Running transaction check
---> Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed
--> Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch
--> Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch
--> Processing Dependency: groff-base for package: perl-Pod-Perldoc-3.20-4.el7.noarch
---> Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed
--> Running transaction check
---> Package groff-base.x86_64 0:1.22.2-8.el7 will be installed
---> Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed
---> Package perl-parent.noarch 1:0.225-244.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

============================================================================================
 Package                       Arch          Version                   Repository      Size
============================================================================================
Installing:
 pwauth                        x86_64        2.3.10-9.el7              epel            17 k
Installing for dependencies:
 groff-base                    x86_64        1.22.2-8.el7              base           942 k
 perl                          x86_64        4:5.16.3-299.el7_9        updates        8.0 M
 perl-Carp                     noarch        1.26-244.el7              base            19 k
 perl-Encode                   x86_64        2.51-7.el7                base           1.5 M
 perl-Exporter                 noarch        5.68-3.el7                base            28 k
 perl-File-Path                noarch        2.09-2.el7                base            26 k
 perl-File-Temp                noarch        0.23.01-3.el7             base            56 k
 perl-Filter                   x86_64        1.49-3.el7                base            76 k
 perl-Getopt-Long              noarch        2.40-3.el7                base            56 k
 perl-HTTP-Tiny                noarch        0.033-3.el7               base            38 k
 perl-PathTools                x86_64        3.40-5.el7                base            82 k
 perl-Pod-Escapes              noarch        1:1.04-299.el7_9          updates         52 k
 perl-Pod-Perldoc              noarch        3.20-4.el7                base            87 k
 perl-Pod-Simple               noarch        1:3.28-4.el7              base           216 k
 perl-Pod-Usage                noarch        1.63-3.el7                base            27 k
 perl-Scalar-List-Utils        x86_64        1.27-248.el7              base            36 k
 perl-Socket                   x86_64        2.010-5.el7               base            49 k
 perl-Storable                 x86_64        2.45-3.el7                base            77 k
 perl-Text-ParseWords          noarch        3.29-4.el7                base            14 k
 perl-Time-HiRes               x86_64        4:1.9725-3.el7            base            45 k
 perl-Time-Local               noarch        1.2300-2.el7              base            24 k
 perl-constant                 noarch        1.27-2.el7                base            19 k
 perl-libs                     x86_64        4:5.16.3-299.el7_9        updates        690 k
 perl-macros                   x86_64        4:5.16.3-299.el7_9        updates         44 k
 perl-parent                   noarch        1:0.225-244.el7           base            12 k
 perl-podlators                noarch        2.5.1-3.el7               base           112 k
 perl-threads                  x86_64        1.87-4.el7                base            49 k
 perl-threads-shared           x86_64        1.43-6.el7                base            39 k

Transaction Summary
============================================================================================
Install  1 Package (+28 Dependent packages)

Total download size: 12 M
Installed size: 40 M
Is this ok [y/d/N]: y
Downloading packages:
(1/29): perl-Carp-1.26-244.el7.noarch.rpm                            |  19 kB  00:00:00     
(2/29): perl-5.16.3-299.el7_9.x86_64.rpm                             | 8.0 MB  00:00:00     
(3/29): perl-File-Path-2.09-2.el7.noarch.rpm                         |  26 kB  00:00:00     
(4/29): groff-base-1.22.2-8.el7.x86_64.rpm                           | 942 kB  00:00:00     
(5/29): perl-Exporter-5.68-3.el7.noarch.rpm                          |  28 kB  00:00:00     
(6/29): perl-Getopt-Long-2.40-3.el7.noarch.rpm                       |  56 kB  00:00:00     
(7/29): perl-Filter-1.49-3.el7.x86_64.rpm                            |  76 kB  00:00:00     
(8/29): perl-Pod-Escapes-1.04-299.el7_9.noarch.rpm                   |  52 kB  00:00:00     
(9/29): perl-PathTools-3.40-5.el7.x86_64.rpm                         |  82 kB  00:00:00     
(10/29): perl-HTTP-Tiny-0.033-3.el7.noarch.rpm                       |  38 kB  00:00:00     
(11/29): perl-Pod-Perldoc-3.20-4.el7.noarch.rpm                      |  87 kB  00:00:00     
(12/29): perl-Pod-Simple-3.28-4.el7.noarch.rpm                       | 216 kB  00:00:00     
(13/29): perl-Encode-2.51-7.el7.x86_64.rpm                           | 1.5 MB  00:00:00     
(14/29): perl-Scalar-List-Utils-1.27-248.el7.x86_64.rpm              |  36 kB  00:00:00     
(15/29): perl-Socket-2.010-5.el7.x86_64.rpm                          |  49 kB  00:00:00     
(16/29): perl-Text-ParseWords-3.29-4.el7.noarch.rpm                  |  14 kB  00:00:00     
(17/29): perl-Pod-Usage-1.63-3.el7.noarch.rpm                        |  27 kB  00:00:00     
(18/29): perl-Time-HiRes-1.9725-3.el7.x86_64.rpm                     |  45 kB  00:00:00     
(19/29): perl-Time-Local-1.2300-2.el7.noarch.rpm                     |  24 kB  00:00:00     
(20/29): perl-File-Temp-0.23.01-3.el7.noarch.rpm                     |  56 kB  00:00:00     
(21/29): perl-libs-5.16.3-299.el7_9.x86_64.rpm                       | 690 kB  00:00:00     
(22/29): perl-constant-1.27-2.el7.noarch.rpm                         |  19 kB  00:00:00     
(23/29): perl-parent-0.225-244.el7.noarch.rpm                        |  12 kB  00:00:00     
(24/29): perl-podlators-2.5.1-3.el7.noarch.rpm                       | 112 kB  00:00:00     
(25/29): perl-Storable-2.45-3.el7.x86_64.rpm                         |  77 kB  00:00:00     
(26/29): perl-threads-1.87-4.el7.x86_64.rpm                          |  49 kB  00:00:00     
(27/29): perl-macros-5.16.3-299.el7_9.x86_64.rpm                     |  44 kB  00:00:00     
(28/29): perl-threads-shared-1.43-6.el7.x86_64.rpm                   |  39 kB  00:00:00     
(29/29): pwauth-2.3.10-9.el7.x86_64.rpm                              |  17 kB  00:00:00     
--------------------------------------------------------------------------------------------
Total                                                       9.3 MB/s |  12 MB  00:00:01     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : groff-base-1.22.2-8.el7.x86_64                                          1/29 
  Installing : 1:perl-parent-0.225-244.el7.noarch                                      2/29 
  Installing : perl-HTTP-Tiny-0.033-3.el7.noarch                                       3/29 
  Installing : perl-podlators-2.5.1-3.el7.noarch                                       4/29 
  Installing : perl-Pod-Perldoc-3.20-4.el7.noarch                                      5/29 
  Installing : 1:perl-Pod-Escapes-1.04-299.el7_9.noarch                                6/29 
  Installing : perl-Encode-2.51-7.el7.x86_64                                           7/29 
  Installing : perl-Text-ParseWords-3.29-4.el7.noarch                                  8/29 
  Installing : perl-Pod-Usage-1.63-3.el7.noarch                                        9/29 
  Installing : 4:perl-macros-5.16.3-299.el7_9.x86_64                                  10/29 
  Installing : perl-Storable-2.45-3.el7.x86_64                                        11/29 
  Installing : perl-Exporter-5.68-3.el7.noarch                                        12/29 
  Installing : perl-constant-1.27-2.el7.noarch                                        13/29 
  Installing : perl-Socket-2.010-5.el7.x86_64                                         14/29 
  Installing : perl-Time-Local-1.2300-2.el7.noarch                                    15/29 
  Installing : perl-Carp-1.26-244.el7.noarch                                          16/29 
  Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                  17/29 
  Installing : perl-PathTools-3.40-5.el7.x86_64                                       18/29 
  Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64                             19/29 
  Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch                                    20/29 
  Installing : perl-File-Temp-0.23.01-3.el7.noarch                                    21/29 
  Installing : perl-File-Path-2.09-2.el7.noarch                                       22/29 
  Installing : perl-threads-shared-1.43-6.el7.x86_64                                  23/29 
  Installing : perl-threads-1.87-4.el7.x86_64                                         24/29 
  Installing : perl-Filter-1.49-3.el7.x86_64                                          25/29 
  Installing : 4:perl-libs-5.16.3-299.el7_9.x86_64                                    26/29 
  Installing : perl-Getopt-Long-2.40-3.el7.noarch                                     27/29 
  Installing : 4:perl-5.16.3-299.el7_9.x86_64                                         28/29 
  Installing : pwauth-2.3.10-9.el7.x86_64                                             29/29 
  Verifying  : pwauth-2.3.10-9.el7.x86_64                                              1/29 
  Verifying  : perl-HTTP-Tiny-0.033-3.el7.noarch                                       2/29 
  Verifying  : perl-threads-shared-1.43-6.el7.x86_64                                   3/29 
  Verifying  : perl-Storable-2.45-3.el7.x86_64                                         4/29 
  Verifying  : perl-Exporter-5.68-3.el7.noarch                                         5/29 
  Verifying  : perl-constant-1.27-2.el7.noarch                                         6/29 
  Verifying  : perl-PathTools-3.40-5.el7.x86_64                                        7/29 
  Verifying  : 4:perl-macros-5.16.3-299.el7_9.x86_64                                   8/29 
  Verifying  : 1:perl-parent-0.225-244.el7.noarch                                      9/29 
  Verifying  : perl-Socket-2.010-5.el7.x86_64                                         10/29 
  Verifying  : groff-base-1.22.2-8.el7.x86_64                                         11/29 
  Verifying  : perl-File-Temp-0.23.01-3.el7.noarch                                    12/29 
  Verifying  : 1:perl-Pod-Simple-3.28-4.el7.noarch                                    13/29 
  Verifying  : perl-Time-Local-1.2300-2.el7.noarch                                    14/29 
  Verifying  : 1:perl-Pod-Escapes-1.04-299.el7_9.noarch                               15/29 
  Verifying  : perl-Carp-1.26-244.el7.noarch                                          16/29 
  Verifying  : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                  17/29 
  Verifying  : perl-Scalar-List-Utils-1.27-248.el7.x86_64                             18/29 
  Verifying  : perl-Pod-Usage-1.63-3.el7.noarch                                       19/29 
  Verifying  : perl-Encode-2.51-7.el7.x86_64                                          20/29 
  Verifying  : perl-Pod-Perldoc-3.20-4.el7.noarch                                     21/29 
  Verifying  : perl-podlators-2.5.1-3.el7.noarch                                      22/29 
  Verifying  : 4:perl-5.16.3-299.el7_9.x86_64                                         23/29 
  Verifying  : perl-File-Path-2.09-2.el7.noarch                                       24/29 
  Verifying  : perl-threads-1.87-4.el7.x86_64                                         25/29 
  Verifying  : perl-Filter-1.49-3.el7.x86_64                                          26/29 
  Verifying  : perl-Getopt-Long-2.40-3.el7.noarch                                     27/29 
  Verifying  : perl-Text-ParseWords-3.29-4.el7.noarch                                 28/29 
  Verifying  : 4:perl-libs-5.16.3-299.el7_9.x86_64                                    29/29 

Installed:
  pwauth.x86_64 0:2.3.10-9.el7                                                              

Dependency Installed:
  groff-base.x86_64 0:1.22.2-8.el7           perl.x86_64 4:5.16.3-299.el7_9                
  perl-Carp.noarch 0:1.26-244.el7            perl-Encode.x86_64 0:2.51-7.el7               
  perl-Exporter.noarch 0:5.68-3.el7          perl-File-Path.noarch 0:2.09-2.el7            
  perl-File-Temp.noarch 0:0.23.01-3.el7      perl-Filter.x86_64 0:1.49-3.el7               
  perl-Getopt-Long.noarch 0:2.40-3.el7       perl-HTTP-Tiny.noarch 0:0.033-3.el7           
  perl-PathTools.x86_64 0:3.40-5.el7         perl-Pod-Escapes.noarch 1:1.04-299.el7_9      
  perl-Pod-Perldoc.noarch 0:3.20-4.el7       perl-Pod-Simple.noarch 1:3.28-4.el7           
  perl-Pod-Usage.noarch 0:1.63-3.el7         perl-Scalar-List-Utils.x86_64 0:1.27-248.el7  
  perl-Socket.x86_64 0:2.010-5.el7           perl-Storable.x86_64 0:2.45-3.el7             
  perl-Text-ParseWords.noarch 0:3.29-4.el7   perl-Time-HiRes.x86_64 4:1.9725-3.el7         
  perl-Time-Local.noarch 0:1.2300-2.el7      perl-constant.noarch 0:1.27-2.el7             
  perl-libs.x86_64 4:5.16.3-299.el7_9        perl-macros.x86_64 4:5.16.3-299.el7_9         
  perl-parent.noarch 1:0.225-244.el7         perl-podlators.noarch 0:2.5.1-3.el7           
  perl-threads.x86_64 0:1.87-4.el7           perl-threads-shared.x86_64 0:1.43-6.el7       

Complete!
[root@stapp03 ~]# sudo yum install mod_authnz_external
Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.lstn.net
 * epel: ftp-chi.osuosl.org
 * extras: ftpmirror.your.org
 * remi-php72: mirror.team-cymru.com
 * remi-safe: mirror.team-cymru.com
 * updates: mirror.grid.uchicago.edu
Resolving Dependencies
--> Running transaction check
---> Package mod_authnz_external.x86_64 0:3.3.3-3.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

============================================================================================
 Package                       Arch             Version                Repository      Size
============================================================================================
Installing:
 mod_authnz_external           x86_64           3.3.3-3.el7            epel            31 k

Transaction Summary
============================================================================================
Install  1 Package

Total download size: 31 k
Installed size: 66 k
Is this ok [y/d/N]: y
Downloading packages:
mod_authnz_external-3.3.3-3.el7.x86_64.rpm                           |  31 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : mod_authnz_external-3.3.3-3.el7.x86_64                                   1/1 
  Verifying  : mod_authnz_external-3.3.3-3.el7.x86_64                                   1/1 

Installed:
  mod_authnz_external.x86_64 0:3.3.3-3.el7                                                  

Complete!
[root@stapp03 ~]# vi /etc/httpd/conf/httpd.conf
[root@stapp03 ~]# sudo systemctl restart httpd
[root@stapp03 ~]# curl -u ravi:YchZHRcLkL http://<website-url>:<apache_port>/protected
-bash: website-url: No such file or directory
[root@stapp03 ~]# curl -u ravi:YchZHRcLkL http://stapp03:8080/protected
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>301 Moved Permanently</title>
</head><body>
<h1>Moved Permanently</h1>
<p>The document has moved <a href="http://stapp03:8080/protected/">here</a>.</p>
</body></html>
[root@stapp03 ~]# curl -u ravi:YchZHRcLkL http://stapp03:8080
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
                <title>Apache HTTP Server Test Page powered by CentOS</title>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Bootstrap -->
    <link href="/noindex/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="noindex/css/open-sans.css" type="text/css" />

<style type="text/css"><!--              

body {
  font-family: "Open Sans", Helvetica, sans-serif;
  font-weight: 100;
  color: #ccc;
  background: rgba(10, 24, 55, 1);
  font-size: 16px;
}

h2, h3, h4 {
  font-weight: 200;
}

h2 {
  font-size: 28px;
}

.jumbotron {
  margin-bottom: 0;
  color: #333;
  background: rgb(212,212,221); /* Old browsers */
  background: radial-gradient(ellipse at center top, rgba(255,255,255,1) 0%,rgba(174,174,183,1) 100%); /* W3C */
}

.jumbotron h1 {
  font-size: 128px;
  font-weight: 700;
  color: white;
  text-shadow: 0px 2px 0px #abc,
               0px 4px 10px rgba(0,0,0,0.15),
               0px 5px 2px rgba(0,0,0,0.1),
               0px 6px 30px rgba(0,0,0,0.1);
}

.jumbotron p {
  font-size: 28px;
  font-weight: 100;
}

.main {
   background: white;
   color: #234;
   border-top: 1px solid rgba(0,0,0,0.12);
   padding-top: 30px;
   padding-bottom: 40px;
}

.footer {
   border-top: 1px solid rgba(255,255,255,0.2);
   padding-top: 30px;
}

    --></style>
</head>
<body>
  <div class="jumbotron text-center">
    <div class="container">
          <h1>Testing 123..</h1>
                <p class="lead">This page is used to test the proper operation of the <a href="http://apache.org">Apache HTTP server</a> after it has been installed. If you can read this page it means that this site is working properly. This server is powered by <a href="http://centos.org">CentOS</a>.</p>
                </div>
  </div>
  <div class="main">
    <div class="container">
       <div class="row">
                        <div class="col-sm-6">
                        <h2>Just visiting?</h2>
                                        <p class="lead">The website you just visited is either experiencing problems or is undergoing routine maintenance.</p>
                                        <p>If you would like to let the administrators of this website know that you've seen this page instead of the page you expected, you should send them e-mail. In general, mail sent to the name "webmaster" and directed to the website's domain should reach the appropriate person.</p>
                                        <p>For example, if you experienced problems while visiting www.example.com, you should send e-mail to "webmaster@example.com".</p>
                                </div>
                                <div class="col-sm-6">
                                        <h2>Are you the Administrator?</h2>
                                        <p>You should add your website content to the directory <tt>/var/www/html/</tt>.</p>
                                        <p>To prevent this page from ever being used, follow the instructions in the file <tt>/etc/httpd/conf.d/welcome.conf</tt>.</p>

                                        <h2>Promoting Apache and CentOS</h2>
                                        <p>You are free to use the images below on Apache and CentOS Linux powered HTTP servers.  Thanks for using Apache and CentOS!</p>
                                        <p><a href="http://httpd.apache.org/"><img src="images/apache_pb.gif" alt="[ Powered by Apache ]"></a> <a href="http://www.centos.org/"><img src="images/poweredby.png" alt="[ Powered by CentOS Linux ]" height="31" width="88"></a></p>
                                </div>
                        </div>
            </div>
                </div>
        </div>
          <div class="footer">
      <div class="container">
        <div class="row">
          <div class="col-sm-6">          
            <h2>Important note:</h2>
            <p class="lead">The CentOS Project has nothing to do with this website or its content,
            it just provides the software that makes the website run.</p>
            
            <p>If you have issues with the content of this site, contact the owner of the domain, not the CentOS project. 
            Unless you intended to visit CentOS.org, the CentOS Project does not have anything to do with this website,
            the content or the lack of it.</p>
            <p>For example, if this website is www.example.com, you would find the owner of the example.com domain at the following WHOIS server:</p>
            <p><a href="http://www.internic.net/whois.html">http://www.internic.net/whois.html</a></p>
          </div>
          <div class="col-sm-6">
            <h2>The CentOS Project</h2>
            <p>The CentOS Linux distribution is a stable, predictable, manageable and reproduceable platform derived from 
               the sources of Red Hat Enterprise Linux (RHEL).<p>
            
            <p>Additionally to being a popular choice for web hosting, CentOS also provides a rich platform for open source communities to build upon. For more information
               please visit the <a href="http://www.centos.org/">CentOS website</a>.</p>
          </div>
        </div>
                  </div>
    </div>
  </div>
</body></html>
[root@stapp03 ~]# curl http://stapp03:8080/protected
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>401 Unauthorized</title>
</head><body>
<h1>Unauthorized</h1>
<p>This server could not verify that you
are authorized to access the document
requested.  Either you supplied the wrong
credentials (e.g., bad password), or your
browser doesn't understand how to supply
the credentials required.</p>
</body></html>
[root@stapp03 ~]# curl -u ravi:YchZHRcLkL http://stapp03:8080
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
                <title>Apache HTTP Server Test Page powered by CentOS</title>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Bootstrap -->
    <link href="/noindex/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="noindex/css/open-sans.css" type="text/css" />

<style type="text/css"><!--              

body {
  font-family: "Open Sans", Helvetica, sans-serif;
  font-weight: 100;
  color: #ccc;
  background: rgba(10, 24, 55, 1);
  font-size: 16px;
}

h2, h3, h4 {
  font-weight: 200;
}

h2 {
  font-size: 28px;
}

.jumbotron {
  margin-bottom: 0;
  color: #333;
  background: rgb(212,212,221); /* Old browsers */
  background: radial-gradient(ellipse at center top, rgba(255,255,255,1) 0%,rgba(174,174,183,1) 100%); /* W3C */
}

.jumbotron h1 {
  font-size: 128px;
  font-weight: 700;
  color: white;
  text-shadow: 0px 2px 0px #abc,
               0px 4px 10px rgba(0,0,0,0.15),
               0px 5px 2px rgba(0,0,0,0.1),
               0px 6px 30px rgba(0,0,0,0.1);
}

.jumbotron p {
  font-size: 28px;
  font-weight: 100;
}

.main {
   background: white;
   color: #234;
   border-top: 1px solid rgba(0,0,0,0.12);
   padding-top: 30px;
   padding-bottom: 40px;
}

.footer {
   border-top: 1px solid rgba(255,255,255,0.2);
   padding-top: 30px;
}

    --></style>
</head>
<body>
  <div class="jumbotron text-center">
    <div class="container">
          <h1>Testing 123..</h1>
                <p class="lead">This page is used to test the proper operation of the <a href="http://apache.org">Apache HTTP server</a> after it has been installed. If you can read this page it means that this site is working properly. This server is powered by <a href="http://centos.org">CentOS</a>.</p>
                </div>
  </div>
  <div class="main">
    <div class="container">
       <div class="row">
                        <div class="col-sm-6">
                        <h2>Just visiting?</h2>
                                        <p class="lead">The website you just visited is either experiencing problems or is undergoing routine maintenance.</p>
                                        <p>If you would like to let the administrators of this website know that you've seen this page instead of the page you expected, you should send them e-mail. In general, mail sent to the name "webmaster" and directed to the website's domain should reach the appropriate person.</p>
                                        <p>For example, if you experienced problems while visiting www.example.com, you should send e-mail to "webmaster@example.com".</p>
                                </div>
                                <div class="col-sm-6">
                                        <h2>Are you the Administrator?</h2>
                                        <p>You should add your website content to the directory <tt>/var/www/html/</tt>.</p>
                                        <p>To prevent this page from ever being used, follow the instructions in the file <tt>/etc/httpd/conf.d/welcome.conf</tt>.</p>

                                        <h2>Promoting Apache and CentOS</h2>
                                        <p>You are free to use the images below on Apache and CentOS Linux powered HTTP servers.  Thanks for using Apache and CentOS!</p>
                                        <p><a href="http://httpd.apache.org/"><img src="images/apache_pb.gif" alt="[ Powered by Apache ]"></a> <a href="http://www.centos.org/"><img src="images/poweredby.png" alt="[ Powered by CentOS Linux ]" height="31" width="88"></a></p>
                                </div>
                        </div>
            </div>
                </div>
        </div>
          <div class="footer">
      <div class="container">
        <div class="row">
          <div class="col-sm-6">          
            <h2>Important note:</h2>
            <p class="lead">The CentOS Project has nothing to do with this website or its content,
            it just provides the software that makes the website run.</p>
            
            <p>If you have issues with the content of this site, contact the owner of the domain, not the CentOS project. 
            Unless you intended to visit CentOS.org, the CentOS Project does not have anything to do with this website,
            the content or the lack of it.</p>
            <p>For example, if this website is www.example.com, you would find the owner of the example.com domain at the following WHOIS server:</p>
            <p><a href="http://www.internic.net/whois.html">http://www.internic.net/whois.html</a></p>
          </div>
          <div class="col-sm-6">
            <h2>The CentOS Project</h2>
            <p>The CentOS Linux distribution is a stable, predictable, manageable and reproduceable platform derived from 
               the sources of Red Hat Enterprise Linux (RHEL).<p>
            
            <p>Additionally to being a popular choice for web hosting, CentOS also provides a rich platform for open source communities to build upon. For more information
               please visit the <a href="http://www.centos.org/">CentOS website</a>.</p>
          </div>
        </div>
                  </div>
    </div>
  </div>
</body></html>
[root@stapp03 ~]# curl -u ravi:YchZHRcLkL http://stapp03:8080/protected
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>301 Moved Permanently</title>
</head><body>
<h1>Moved Permanently</h1>
<p>The document has moved <a href="http://stapp03:8080/protected/">here</a>.</p>
</body></html>
[root@stapp03 ~]# curl http://stapp03:8080/protected
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>401 Unauthorized</title>
</head><body>
<h1>Unauthorized</h1>
<p>This server could not verify that you
are authorized to access the document
requested.  Either you supplied the wrong
credentials (e.g., bad password), or your
browser doesn't understand how to supply
the credentials required.</p>
</body></html>
[root@stapp03 ~]# history
    1  yum -y install httpd php php-mysql php-gd openssl psmisc tar
    2  service httpd start
    3  service httpd status
    4  docker run --name mariadb -e MYSQL_ROOT_PASSWORD=mypass -d mariadb
    5  exit
    6  curl -LO http://wordpress.org/latest.tar.gz                         &&    tar xvzf /latest.tar.gz -C /var/www/html --strip-components=1       &&    rm /latest.tar.gz                                                   &&    chown -R apache:apache /var/www/
    7  ls
    8  cd /var/www/html/
    9  ls
   10  mv wp-config-sample.php wp-config.php
   11  vim wp-config.php 
   12  vi wp-config.php 
   13  ping bfe80f0ac4bc
   14  ip a
   15  ping 172.17.0.2
   16  ping 172.17.0.3
   17  vi wp-config.php 
   18  service httpd restart
   19  vi wp-config.php 
   20  exit
   21  service httpd start
   22  yum list available |grep php
   23  yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
   24  yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm
   25  yum install yum-utils
   26  yum-config-manager --enable remi-php72
   27  yum install php php-mcrypt php-cli php-gd php-curl php-mysql php-ldap php-zip php-fileinfo 
   28  service httpd restart
   29  vim /var/www/html/wp-config.php 
   30  vi /var/www/html/wp-config.php 
   31  exit
   32  vi /var/www/html/wp-config.php 
   33  pwd
   34  exit
   35  rm -rf /var/www/html/*
   36  exit
   37  service httpd status
   38  vim /etc/httpd/conf/httpd.conf 
   39  vi /etc/httpd/conf/httpd.conf 
   40  service httpd start
   41  service httpd status
   42  curl localhost
   43  curl localhost:8080
   44  exit
   45  which pwauth
   46  sudo yum install pwauth
   47  sudo yum install mod_authnz_external
   48  vi /etc/httpd/conf/httpd.conf
   49  sudo systemctl restart httpd
   50  curl -u ravi:YchZHRcLkL http://<website-url>:<apache_port>/protected
   51  curl -u ravi:YchZHRcLkL http://stapp03:8080/protected
   52  curl -u ravi:YchZHRcLkL http://stapp03:8080
   53  curl http://stapp03:8080/protected
   54  curl -u ravi:YchZHRcLkL http://stapp03:8080
   55  curl -u ravi:YchZHRcLkL http://stapp03:8080/protected
   56  curl http://stapp03:8080/protected
   57  history
[root@stapp03 ~]# 
```


These commands appear to be configuring Apache web server for user authentication and testing access to a protected directory. Let's break down the commands:

1. **Check the Location of pwauth:**
   ```bash
   which pwauth
   ```
   This command is checking the location of the `pwauth` executable. `which` is a command that shows the full path of shell commands.

2. **Install pwauth:**
   ```bash
   sudo yum install pwauth
   ```
   This installs the `pwauth` package using the yum package manager. `pwauth` is commonly used for basic authentication with Apache.

3. **Install mod_authnz_external:**
   ```bash
   sudo yum install mod_authnz_external
   ```
   This installs the `mod_authnz_external` module for Apache, which allows for more flexible authentication mechanisms.

4. **Edit Apache Configuration File (using Vi):**
   ```bash
   vi /etc/httpd/conf/httpd.conf
   ```
   This opens the Apache configuration file for editing using the Vi editor. Configuration changes related to authentication are likely made in this step.

5. **Restart Apache Web Server:**
   ```bash
   sudo systemctl restart httpd
   ```
   This restarts the Apache web server to apply the changes made in the configuration file.

6. **Curl with User Credentials to Access Protected Resource:**
   ```bash
   curl -u ravi:YchZHRcLkL http://<website-url>:<apache_port>/protected
   ```
   These commands use the `curl` tool to access a protected resource on the Apache server, providing the username `ravi` and the corresponding password. Replace `<website-url>` and `<apache_port>` with the actual values.

   - `curl -u ravi:YchZHRcLkL http://stapp03:8080/protected`
   - `curl -u ravi:YchZHRcLkL http://stapp03:8080`
   - `curl http://stapp03:8080/protected`

   These commands attempt to access a protected resource using different variations of the `curl` command, with and without credentials.

These commands suggest the setup of basic authentication on an Apache web server using `pwauth` and `mod_authnz_external`. Users need to authenticate with the provided credentials to access the protected resource.

To set up basic authentication with PAM for a specific directory in the Apache web server on CentOS, follow these steps:

1. **Install mod_authnz_external module**:
   ```bash
   sudo yum install mod_authnz_external
   ```

2. **Configure Apache**:
   Edit the Apache configuration file. You can use any text editor like `nano` or `vi`. For example:
   ```bash
   sudo nano /etc/httpd/conf/httpd.conf
   ```

   Add the following lines to configure basic authentication with PAM:

   ```apache
   <Location "/protected">
       AuthType Basic
       AuthName "Restricted Access"
       AuthBasicProvider external
       AuthExternal pwauth
       Require valid-user
   </Location>
   ```

   This configuration uses the `pwauth` PAM module for authentication.

3. **Restart Apache**:
   ```bash
   sudo systemctl restart httpd
   ```

4. **Test the Setup**:
   Use the following `curl` command to test the protected URL:

   ```bash
   curl -u ravi:YchZHRcLkL http://<website-url>:<apache_port>/protected
   ```

   Replace `<website-url>` and `<apache_port>` with your actual values.

   If the setup is correct, you should see the content of the protected URL.

This setup assumes that you have the `pwauth` PAM module installed on your system. If it's not installed, you can install it using:

```bash
sudo yum install pwauth
```

Make sure to adapt the configuration to your specific requirements and environment.
